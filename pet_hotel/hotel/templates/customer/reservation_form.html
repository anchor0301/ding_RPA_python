{% extends "public_base.html" %}
{% load static %}


{% block extra_css %}

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/themes/material_blue.css">
<link rel="stylesheet" href="{% static 'reservation/css/public_base.css' %}">
<link rel="stylesheet" href="{% static 'reservation/css/reservation_form.css' %}">
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>
<script src="{% static 'reservation/js/reservation_form.js' %}"></script>
{% endblock %}


{% block content %}
<div class="container mt-5">
    <h2>{{ customer.name }} ë‹˜ì˜ ì˜ˆì•½</h2>

    <form method="post" action="{% url 'customer:reservation_submit' customer.token %}" novalidate
          class="needs-validation"
          id="reservationForm">
        {% csrf_token %}
        <!-- ë°˜ë ¤ê²¬ ì„ íƒ -->
        <div class="mb-3">
            <p id="selectedDogCount" class="text-muted small mb-2">
                ğŸ¶ ì„ íƒëœ ë°˜ë ¤ê²¬: 0ë§ˆë¦¬
            </p>

            <div class="dog-selection">
                {% for dog in customer.dogs.all %}
                <label class="dog-option">
                    <input type="checkbox" name="dog_ids" value="{{ dog.id }}">
                    <div class="dog-card">
                        <div class="dog-header">
                            <strong>{{ dog.name }}</strong>
                            <span class="badge">{{ dog.breed }}</span>
                        </div>
                        <div class="dog-gender">
                            {% if dog.gender == "M" %}
                            â™‚ ìˆ˜ì»·
                            {% else %}
                            â™€ ì•”ì»·
                            {% endif %}
                        </div>
                        <div class="check-icon">âœ“</div>
                    </div>
                </label>
                {% endfor %}
            </div>

            <div class="mt-2">
                <a href="{% url 'customer:register_dog' token=customer.token %}"
                   class="btn btn-outline-secondary add-dog-btn">
                    + ê°•ì•„ì§€ ì¶”ê°€í•˜ê¸°
                </a>
            </div>
        </div>

        <!-- ì…ì‹¤/í‡´ì‹¤ ë‚ ì§œ -->
        <div class="date-time-picker-container">
            <label for="date-range">ğŸ¾ ì…Â·í‡´ì‹¤ ë‚ ì§œ ì„ íƒ</label>
            <input type="text" id="date-range" placeholder="ì˜ˆì‹œ) 2025-03-01 ~ 2025-04-05 | ì…ì‹¤ê³¼ í‡´ì‹¤ì„ ì„ íƒí•´ì£¼ì„¸ìš”">
            <input type="hidden" name="check_in_date" id="check-in-date">
            <input type="hidden" name="check_out_date" id="check-out-date">

            <label for="check-in-time">ğŸ•’ ì…ì‹¤ ì˜ˆì • ì‹œê°„</label>
            <input type="text" id="check-in-time" name="check_in_time" placeholder="ex) 10:00">

            <label for="check-out-time">ğŸ•’ í‡´ì‹¤ ì˜ˆì • ì‹œê°„</label>
            <input type="text" id="check-out-time" name="check_out_time" placeholder="ex) 12:00">
        </div>

        <!-- ìš”ì²­ì‚¬í•­ -->
        <div class="mb-4">
            <label for="notes" class="form-label">ì¶”ê°€ ìš”ì²­ì‚¬í•­</label>
            <textarea
                    class="form-control"
                    id="notes"
                    name="notes"
                    rows="3"
                    placeholder="ì˜ˆ) ì•ŒëŸ¬ì§€ ì£¼ì˜, íŠ¹ë³„ ê°„ì‹ ìš”ì²­ ë“±"
            ></textarea>
        </div>

        <div class="d-grid">
            <button type="submit" class="btn btn-primary btn-lg">
                ì œì¶œ í•˜ê¸°
            </button>
        </div>
    </form>
</div>

{% endblock %}