{% extends "public_base.html" %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'reservation/css/signature.css' %}">
{% endblock %}


{% block content %}
<div class="agreement-container">
    <h1>μ„λΉ„μ¤ μ΄μ© λ™μμ„</h1>
    <p>μ•λ…•ν•μ„Έμ” {{ customer.name }}λ‹, μ„λΉ„μ¤λ¥Ό μ΄μ©ν•μ‹κΈ° μ„ν•΄ μ•„λ λ‚΄μ©μ„ ν™•μΈν•μ‹κ³  μ„λ…ν•΄ μ£Όμ„Έμ”.</p>

    <div class="agreement-box">
        <p>π“ λ³Έ μ• κ²¬νΈν…” μ„λΉ„μ¤λ” κ³ κ°λ‹μ μ†μ¤‘ν• λ°λ ¤κ²¬μ„ μ•μ „ν•κ³  λ”°λ»ν•κ² λ³΄νΈν•κΈ° μ„ν•΄ μµμ„ μ„ λ‹¤ν•©λ‹λ‹¤.<br>
            π¶ κ³ κ°λ‹μ λ°λ ¤κ²¬μ΄ λ§΅κ²¨μ§€λ” λ™μ• μ„κΈ‰ν• μƒν™©μ΄ λ°μƒν•  κ²½μ° μ‚¬μ „ λ™μ ν•μ— λ³‘μ› μ§„λ£ λ“±μ„ μ§„ν–‰ν•  μ μμΌλ©°,<br>
            μ΄μ— λ€ν• μ±…μ„μ€ κ³ κ°λ‹κ» μμμ„ ν™•μΈν•©λ‹λ‹¤.</p>
    </div>
    {% if recent_reservations %}
    <div class="recent-box">
        <h4>π“ μµκ·Ό μ΄μ© μ΄λ ¥</h4>
        <ul>
            {% for r in recent_reservations %}
            <li>
                <strong>{{ r.dog.name }}</strong> ({{ r.dog.breed }})<br>
                π—“ {{ r.check_in|date:"Yλ…„ mμ›” dμΌ H:i" }} ~ {{ r.check_out|date:"mμ›” dμΌ H:i" }}
            </li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    <h3 class="mt-4">βοΈ μ„λ…ν•΄μ£Όμ„Έμ”</h3>
    <canvas id="signature-pad" width="600" height="400" style="border: 1px solid #ccc;"></canvas>

    <form method="POST" action="{% url 'customer:agreement_submit' %}?token={{ customer.token }}">
        {% csrf_token %}
        <input type="hidden" name="signature" id="signature-field">
        <button type="submit" class="submit-btn">μ„λ… μ™„λ£ν•κ³  μμ•½ν•λ¬ κ°€κΈ°</button>
    </form>
</div>

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
<script src="{% static 'reservation/js/signature.js' %}"></script>
{% endblock  %}


{% endblock %}